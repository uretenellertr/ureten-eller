(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{7953:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return r(1430)}])},6831:function(e,a,r){"use strict";r.d(a,{I:function(){return o},db:function(){return c}});var i=r(3977),n=r(5876),t=r(9828);let s=(0,i.getApps)().length?(0,i.Mq)():(0,i.initializeApp)({apiKey:"AIzaSyCd9GjP6CDA8i4XByhXDHyESy-g_DHVwvQ",authDomain:"ureteneller-ecaac.firebaseapp.com",projectId:"ureteneller-ecaac",storageBucket:"ureteneller-ecaac.firebasestorage.app",messagingSenderId:"368042877151",appId:"1:368042877151:web:ee0879fc4717928079c96a",measurementId:"G-BJHKN8V4RQ"}),o=(0,n.getAuth)(s),c=(0,t.getFirestore)(s)},1430:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return d}});var i=r(5893),n=r(645),t=r.n(n),s=r(7294),o=r(6831),c=r(5876),l=r(9828);function d(){s.useEffect(()=>{try{"ok"===localStorage.getItem("ue_admin_auth")||document.cookie.includes("ue_admin=1")||location.replace("/admin/login/")}catch(e){}},[]);let[e,a]=s.useState(null);s.useEffect(()=>(0,c.onAuthStateChanged)(o.I,e=>a(e)),[]);let[r,n]=s.useState({orders:"—",pending:"—",open:"—",payments:"—",users:"—"}),[t,d]=s.useState([]),[m,f]=s.useState([]),[h,j]=s.useState([]),[g,k]=s.useState("");return s.useEffect(()=>{(async()=>{k("");try{try{let e=await (0,l.getCountFromServer)((0,l.collection)(o.db,"orders")),a=await (0,l.getCountFromServer)((0,l.query)((0,l.collection)(o.db,"listings"),(0,l.where)("status","==","pending"))),r=await (0,l.getCountFromServer)((0,l.query)((0,l.collection)(o.db,"conversations"),(0,l.where)("status","==","open"))),i=await (0,l.getCountFromServer)((0,l.query)((0,l.collection)(o.db,"payments"),(0,l.where)("status","==","pending_admin"))),t=await (0,l.getCountFromServer)((0,l.collection)(o.db,"users"));n({orders:e.data().count,pending:a.data().count,open:r.data().count,payments:i.data().count,users:t.data().count})}catch(e){}try{let e=await (0,l.PL)((0,l.query)((0,l.collection)(o.db,"listings"),(0,l.where)("status","==","pending"),(0,l.b9)(5)));d(e.docs.map(e=>({id:e.id,...e.data()})))}catch(e){}try{let e=await (0,l.PL)((0,l.query)((0,l.collection)(o.db,"conversations"),(0,l.where)("status","==","open"),(0,l.b9)(5)));f(e.docs.map(e=>({id:e.id,...e.data()})))}catch(e){}try{let e=await (0,l.PL)((0,l.query)((0,l.collection)(o.db,"orders"),(0,l.b9)(10)));j(e.docs.map(e=>({id:e.id,...e.data()})))}catch(e){}}catch(e){k((null==e?void 0:e.message)||String(e))}})()},[]),(0,i.jsxs)("div",{className:"wrap",children:[(0,i.jsxs)("aside",{className:"side",children:[(0,i.jsx)("div",{className:"brand",children:"R \xb7 Admin"}),(0,i.jsxs)("nav",{className:"nav",children:[(0,i.jsx)("a",{className:"navBtn on",href:"/admin/",children:"\xd6n Panel"}),(0,i.jsx)("a",{className:"navBtn",href:"/admin/listings",children:"İlanlar"}),(0,i.jsx)("a",{className:"navBtn",href:"/admin/orders",children:"Siparişler"}),(0,i.jsx)("a",{className:"navBtn",href:"/admin/support",children:"Destek"}),(0,i.jsx)("a",{className:"navBtn",href:"/admin/moderation",children:"\xd6demeler"}),(0,i.jsx)("a",{className:"navBtn",href:"/admin/users",children:"Kullanıcılar"})]}),(0,i.jsx)("button",{className:"logout",onClick:()=>{try{localStorage.removeItem("ue_admin_auth")}catch(e){}document.cookie="ue_admin=; Max-Age=0; Path=/; SameSite=Lax; Secure",location.href="/admin/login/"},children:"\xc7ıkış"})]}),(0,i.jsxs)("main",{className:"main",children:[!e&&(0,i.jsxs)("div",{className:"warn",children:["Ger\xe7ek veriyi g\xf6rmek ve işlem yapmak i\xe7in ",(0,i.jsx)("a",{href:"/login",children:"/login"})," ile Firebase’e giriş yapın (users/","{uid}"," → ",(0,i.jsx)("b",{children:'role: "admin"'})," olmalı)."]}),(0,i.jsx)("h1",{style:{fontWeight:800,margin:"0 0 12px"},children:"\xd6n Panel"}),(0,i.jsxs)("div",{className:"cards",children:[(0,i.jsx)(x,{title:"Toplam Sipariş",value:r.orders,href:"/admin/orders"}),(0,i.jsx)(x,{title:"Onay Bekleyen İlan",value:r.pending,href:"/admin/listings"}),(0,i.jsx)(x,{title:"A\xe7ık Destek",value:r.open,href:"/admin/support"}),(0,i.jsx)(x,{title:"Bekleyen \xd6deme",value:r.payments,href:"/admin/moderation"}),(0,i.jsx)(x,{title:"Toplam Kullanıcı",value:r.users,href:"/admin/users"})]}),g&&(0,i.jsxs)("div",{className:"err",children:["Hata: ",g]}),(0,i.jsxs)("section",{className:"block",children:[(0,i.jsxs)("div",{className:"blockHd",children:[(0,i.jsx)("h2",{children:"İlan Onay Kuyruğu"}),(0,i.jsx)("a",{className:"link",href:"/admin/listings",children:"T\xfcm\xfcn\xfc g\xf6r"})]}),(0,i.jsx)(b,{cols:["ID","Başlık","Satıcı","Fiyat","Oluşturma","İşlem"],children:0===t.length?(0,i.jsx)(u,{colSpan:6,text:"Kuyruk boş."}):t.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"mono",children:e.id}),(0,i.jsx)("td",{children:e.title||"—"}),(0,i.jsx)("td",{children:e.seller_uid||e.seller_id||"—"}),(0,i.jsx)("td",{children:e.price?"₺".concat(e.price):"—"}),(0,i.jsx)("td",{children:e.created_at||"—"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{className:"link",href:"/admin/listings",children:"İşlem"})})]},e.id))})]}),(0,i.jsxs)("section",{className:"block",children:[(0,i.jsxs)("div",{className:"blockHd",children:[(0,i.jsx)("h2",{children:"Destek Talepleri"}),(0,i.jsx)("a",{className:"link",href:"/admin/support",children:"T\xfcm\xfcn\xfc g\xf6r"})]}),(0,i.jsx)(b,{cols:["ID","Konu","Kullanıcı","Son Mesaj","İşlem"],children:0===m.length?(0,i.jsx)(u,{colSpan:5,text:"A\xe7ık talep yok."}):m.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"mono",children:e.id}),(0,i.jsx)("td",{children:e.topic||"—"}),(0,i.jsx)("td",{children:Array.isArray(e.participants)?e.participants.join(", "):"—"}),(0,i.jsx)("td",{children:e.updated_at||"—"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{className:"link",href:"/admin/support",children:"A\xe7"})})]},e.id))})]}),(0,i.jsxs)("section",{className:"block",children:[(0,i.jsx)("h2",{children:"Son Siparişler"}),(0,i.jsx)(b,{cols:["ID","Alıcı → Satıcı","Tutar","Durum","Tarih","Detay"],children:0===h.length?(0,i.jsx)(u,{colSpan:6,text:"Kayıt yok."}):h.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"mono",children:e.id}),(0,i.jsxs)("td",{children:[e.buyer_uid||"—"," → ",e.seller_uid||"—"]}),(0,i.jsx)("td",{children:e.amount?"₺".concat(e.amount):"—"}),(0,i.jsx)("td",{children:e.status||"—"}),(0,i.jsx)("td",{children:e.created_at||"—"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{className:"link",href:"/admin/orders",children:"G\xf6r"})})]},e.id))})]})]}),(0,i.jsx)(p,{})]})}function x(e){let{title:a,value:r,href:n}=e;return(0,i.jsxs)("a",{className:"card",href:n,children:[(0,i.jsx)("div",{className:"cardT",children:a}),(0,i.jsx)("div",{className:"cardV",children:r})]})}function b(e){let{cols:a,children:r}=e;return(0,i.jsx)("div",{className:"tableWrap",children:(0,i.jsxs)("table",{className:"tbl",children:[(0,i.jsx)("thead",{children:(0,i.jsx)("tr",{children:a.map(e=>(0,i.jsx)("th",{children:e},e))})}),(0,i.jsx)("tbody",{children:r})]})})}function u(e){let{colSpan:a=1,text:r="—"}=e;return(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:a,className:"empty",children:r})})}function p(){return(0,i.jsx)(t(),{id:"820e1a9fcb2431b6",children:".wrap.jsx-820e1a9fcb2431b6{display:grid;grid-template-columns:240px 1fr;min-height:100vh;background:#0b0b0b;color:#e5e7eb;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}.side.jsx-820e1a9fcb2431b6{border-right:1px solid#1f2937;padding:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:12px;position:-webkit-sticky;position:sticky;top:0;height:100vh}.brand.jsx-820e1a9fcb2431b6{font-weight:800;color:#fff;margin-bottom:8px}.nav.jsx-820e1a9fcb2431b6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:6px}.navBtn.jsx-820e1a9fcb2431b6{display:block;padding:10px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#1f2937;background:#0f172a;text-decoration:none;color:#e5e7eb}.navBtn.on.jsx-820e1a9fcb2431b6{background:#111827;border-color:#374151}.navBtn.jsx-820e1a9fcb2431b6:hover{background:#0f172a99}.logout.jsx-820e1a9fcb2431b6{margin-top:auto;all:unset;cursor:pointer;padding:10px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#ef4444;color:#fff;background:#991b1b;text-align:center}.logout.jsx-820e1a9fcb2431b6:hover{background:#b91c1c}.main.jsx-820e1a9fcb2431b6{padding:20px}.cards.jsx-820e1a9fcb2431b6{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px;margin:0 0 16px}.card.jsx-820e1a9fcb2431b6{display:block;background:#111827;border:1px solid#374151;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:12px;text-decoration:none;color:#e5e7eb}.cardT.jsx-820e1a9fcb2431b6{font-size:12px;color:#94a3b8}.cardV.jsx-820e1a9fcb2431b6{font-size:24px;font-weight:800}.block.jsx-820e1a9fcb2431b6{margin:18px 0}.blockHd.jsx-820e1a9fcb2431b6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:10px}.blockHd.jsx-820e1a9fcb2431b6 h2.jsx-820e1a9fcb2431b6{margin:0 0 8px;font-size:16px}.link.jsx-820e1a9fcb2431b6{font-size:13px;color:#e5e7eb;text-decoration:none;border:1px solid#374151;padding:6px 10px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;margin-left:auto}.warn.jsx-820e1a9fcb2431b6{background:#0f172a;border:1px solid#374151;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:12px;margin:0 0 12px}.tableWrap.jsx-820e1a9fcb2431b6{overflow:auto;border:1px solid#1f2937;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px}.tbl.jsx-820e1a9fcb2431b6{width:100%;border-collapse:separate;border-spacing:0}.tbl.jsx-820e1a9fcb2431b6 th.jsx-820e1a9fcb2431b6,.tbl.jsx-820e1a9fcb2431b6 td.jsx-820e1a9fcb2431b6{padding:10px 12px;border-bottom:1px solid#1f2937;font-size:14px;vertical-align:middle}.tbl.jsx-820e1a9fcb2431b6 thead.jsx-820e1a9fcb2431b6 th.jsx-820e1a9fcb2431b6{position:-webkit-sticky;position:sticky;top:0;background:#0b0b0b}.mono.jsx-820e1a9fcb2431b6{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:12px}.empty.jsx-820e1a9fcb2431b6{color:#94a3b8;text-align:center}@media(max-width:900px){.wrap.jsx-820e1a9fcb2431b6{grid-template-columns:1fr}.side.jsx-820e1a9fcb2431b6{position:static;height:auto;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.logout.jsx-820e1a9fcb2431b6{margin-top:0}}"})}},3977:function(e,a,r){"use strict";r.d(a,{Mq:function(){return i.Mq},getApps:function(){return i.C6},initializeApp:function(){return i.ZF}});var i=r(6771);(0,i.KN)("firebase","12.4.0","app")},5876:function(e,a,r){"use strict";r.d(a,{w9:function(){return i.W},hJ:function(){return i.Y},Xb:function(){return i.ab},getAuth:function(){return i.p},onAuthStateChanged:function(){return i.z},aF:function(){return i.a4},w$:function(){return i.ah},LS:function(){return i.a6},signInAnonymously:function(){return i.a1},e5:function(){return i.ac},rh:function(){return i.d},w7:function(){return i.D},gQ:function(){return i.an},ck:function(){return i.al}});var i=r(9199);r(6771),r(9711),r(4645),r(75)}},function(e){e.O(0,[281,703,645,771,229,888,774,179],function(){return e(e.s=7953)}),_N_E=e.O()}]);