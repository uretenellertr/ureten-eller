(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{7953:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(1430)}])},2622:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(5893);t(7294);var i=t(1664),l=t.n(i);function s(e){let{children:n,role:t="owner"}=e;return(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"240px 1fr",minHeight:"100vh"},children:[(0,r.jsxs)("aside",{style:{background:"#0b0b0b",color:"#fff",padding:16},children:[(0,r.jsx)("h2",{style:{marginTop:0},children:"Admin"}),(0,r.jsxs)("nav",{style:{display:"grid",gap:8},children:[(0,r.jsx)(l(),{href:"/admin",style:{color:"#e2e8f0"},children:"\xd6n Panel"}),(0,r.jsx)(l(),{href:"/admin/users",style:{color:"#e2e8f0"},children:"Kullanıcılar"}),(0,r.jsx)(l(),{href:"/admin/listings",style:{color:"#e2e8f0"},children:"İlanlar"}),(0,r.jsx)(l(),{href:"/admin/orders",style:{color:"#e2e8f0"},children:"Siparişler"}),(0,r.jsx)(l(),{href:"/admin/support",style:{color:"#e2e8f0"},children:"Canlı Destek"}),(0,r.jsx)(l(),{href:"/admin/moderation",style:{color:"#e2e8f0"},children:"Moderat\xf6r"})]}),(0,r.jsxs)("div",{style:{marginTop:16,fontSize:12,opacity:.8},children:["Rol: ",t]})]}),(0,r.jsx)("section",{style:{padding:16,background:"#f8fafc"},children:n})]})}},2704:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(7294),i=t(6831),l=t(5876),s=t(9828);function o(){let[e,n]=(0,r.useState)(null),[t,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=(0,l.onAuthStateChanged)(i.I,async e=>{if(!e){n(null),o(!0);return}try{let t=await (0,s.getDoc)((0,s.doc)(i.db,"roles",e.uid));n(t.exists()?t.data().role:null)}finally{o(!0)}});return()=>e()},[]),{role:e,ready:t}}},6831:function(e,n,t){"use strict";t.d(n,{I:function(){return o},db:function(){return a}});var r=t(3977),i=t(5876),l=t(9828);let s=(0,r.getApps)().length?(0,r.Mq)():(0,r.initializeApp)({apiKey:"AIzaSyCd9GjP6CDA8i4XByhXDHyESy-g_DHVwvQ",authDomain:"ureteneller-ecaac.firebaseapp.com",projectId:"ureteneller-ecaac",storageBucket:"ureteneller-ecaac.firebasestorage.app",messagingSenderId:"368042877151",appId:"1:368042877151:web:ee0879fc4717928079c96a",measurementId:"G-BJHKN8V4RQ"}),o=(0,i.getAuth)(s),a=(0,l.getFirestore)(s)},1430:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return d}});var r=t(5893),i=t(7294),l=t(2622),s=t(2704),o=t(6831),a=t(9828);function d(){let{role:e,ready:n}=(0,s.Z)(),[t,d]=i.useState({orders:"—",pendingListings:"—",openSupport:"—"});return(i.useEffect(()=>{if(!n||"admin"!==e)return;let t=!0;return(async()=>{try{let[e,n,r]=await Promise.all([(0,a.getCountFromServer)((0,a.collection)(o.db,"orders")),(0,a.getCountFromServer)((0,a.query)((0,a.collection)(o.db,"listings"),(0,a.where)("status","==","pending"))),(0,a.getCountFromServer)((0,a.query)((0,a.collection)(o.db,"conversations"),(0,a.where)("status","==","open")))]);t&&d({orders:e.data().count,pendingListings:n.data().count,openSupport:r.data().count})}catch(e){console.error("admin-counters",e)}})(),()=>{t=!1}},[n,e]),n)?"admin"!==e?(0,r.jsxs)("div",{style:{maxWidth:520,margin:"60px auto",padding:"24px",fontFamily:"system-ui"},children:[(0,r.jsx)("h1",{style:{fontSize:28,fontWeight:800,margin:"0 0 8px"},children:"Admin panel"}),(0,r.jsx)("p",{style:{color:"#475569",margin:"0 0 16px"},children:"Devam etmek i\xe7in giriş yapın."}),(0,r.jsx)("a",{href:"/login?next=/admin/",style:{display:"inline-block",background:"#111827",color:"#fff",border:"1px solid #111827",padding:"10px 14px",borderRadius:10,fontWeight:800,textDecoration:"none"},children:"Giriş yap"})]}):(0,r.jsxs)(l.Z,{role:e,children:[(0,r.jsx)("h1",{children:"\xd6n Panel"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:12},children:[(0,r.jsx)(c,{title:"Toplam Sipariş",value:t.orders}),(0,r.jsx)(c,{title:"Onay Bekleyen İlan",value:t.pendingListings}),(0,r.jsx)(c,{title:"A\xe7ık Destek",value:t.openSupport})]})]}):null}function c(e){let{title:n,value:t}=e;return(0,r.jsxs)("div",{style:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:12,padding:16},children:[(0,r.jsx)("div",{style:{fontSize:13,color:"#475569"},children:n}),(0,r.jsx)("div",{style:{fontSize:28,fontWeight:800},children:t})]})}}},function(e){e.O(0,[281,703,771,229,950,888,774,179],function(){return e(e.s=7953)}),_N_E=e.O()}]);