(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{7953:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return i(1430)}])},6831:function(e,t,i){"use strict";i.d(t,{I:function(){return d},db:function(){return l}});var r=i(3977),n=i(5876),s=i(9828);let a=(0,r.getApps)().length?(0,r.Mq)():(0,r.initializeApp)({apiKey:"AIzaSyCd9GjP6CDA8i4XByhXDHyESy-g_DHVwvQ",authDomain:"ureteneller-ecaac.firebaseapp.com",projectId:"ureteneller-ecaac",storageBucket:"ureteneller-ecaac.firebasestorage.app",messagingSenderId:"368042877151",appId:"1:368042877151:web:ee0879fc4717928079c96a",measurementId:"G-BJHKN8V4RQ"}),d=(0,n.getAuth)(a),l=(0,s.getFirestore)(a)},1430:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return o}});var r=i(5893),n=i(645),s=i.n(n),a=i(7294),d=i(6831),l=i(9828);function o(){a.useEffect(()=>{try{"ok"===localStorage.getItem("ue_admin_auth")||document.cookie.includes("ue_admin=1")||window.location.replace("/admin/login/")}catch(e){}},[]);let[e,t]=a.useState("home"),[i,n]=a.useState({orders:"—",pendingListings:"—",openSupport:"—",pendingPayments:"—",users:"—"}),[o,x]=a.useState([]),[p,m]=a.useState([]),[h,f]=a.useState([]);return a.useEffect(()=>{(async()=>{try{let e=await (0,l.getCountFromServer)((0,l.collection)(d.db,"orders")),t=await (0,l.getCountFromServer)((0,l.query)((0,l.collection)(d.db,"listings"),(0,l.where)("status","==","pending"))),i=await (0,l.getCountFromServer)((0,l.query)((0,l.collection)(d.db,"conversations"),(0,l.where)("status","==","open"))),r=await (0,l.getCountFromServer)((0,l.query)((0,l.collection)(d.db,"payments"),(0,l.where)("status","in",["pending","pending_admin"]))),s=await (0,l.getCountFromServer)((0,l.collection)(d.db,"users"));n({orders:e.data().count,pendingListings:t.data().count,openSupport:i.data().count,pendingPayments:r.data().count,users:s.data().count})}catch(e){}try{let e=(0,l.query)((0,l.collection)(d.db,"listings"),(0,l.where)("status","==","pending"),(0,l.Xo)("created_at","desc"),(0,l.b9)(5)),t=await (0,l.PL)(e);x(t.docs.map(e=>({id:e.id,...e.data()})))}catch(e){}try{let e=(0,l.query)((0,l.collection)(d.db,"conversations"),(0,l.where)("status","==","open"),(0,l.Xo)("updated_at","desc"),(0,l.b9)(5)),t=await (0,l.PL)(e);m(t.docs.map(e=>({id:e.id,...e.data()})))}catch(e){}try{let e=(0,l.query)((0,l.collection)(d.db,"orders"),(0,l.Xo)("created_at","desc"),(0,l.b9)(10)),t=await (0,l.PL)(e);f(t.docs.map(e=>({id:e.id,...e.data()})))}catch(e){}})()},[]),(0,r.jsxs)("div",{className:"jsx-443df9369397e885 wrap",children:[(0,r.jsxs)("aside",{className:"jsx-443df9369397e885 side",children:[(0,r.jsx)("div",{className:"jsx-443df9369397e885 brand",children:"R \xb7 Admin"}),(0,r.jsx)("nav",{className:"jsx-443df9369397e885 nav",children:[{k:"home",t:"\xd6n Panel"},{k:"listings",t:"İlanlar"},{k:"orders",t:"Siparişler"},{k:"support",t:"Destek"},{k:"payments",t:"\xd6demeler"},{k:"users",t:"Kullanıcılar"}].map(i=>(0,r.jsx)("button",{onClick:()=>t(i.k),className:"jsx-443df9369397e885 navBtn"+(e===i.k?" on":""),children:i.t},i.k))}),(0,r.jsx)("button",{onClick:function(){try{localStorage.removeItem("ue_admin_auth")}catch(e){}document.cookie="ue_admin=; Max-Age=0; Path=/; SameSite=Lax; Secure",window.location.replace("/admin/login/")},className:"jsx-443df9369397e885 logout",children:"\xc7ıkış"})]}),(0,r.jsxs)("main",{className:"jsx-443df9369397e885 main",children:["home"===e&&(0,r.jsx)(c,{stats:i,pendingList:o,openTickets:p,recentOrders:h}),"listings"===e&&(0,r.jsx)(u,{title:"İlanlar",children:(0,r.jsxs)("p",{className:"jsx-443df9369397e885 muted",children:["İlan onayı, vitrine alma / d\xfcş\xfcrme ve detay işlemleri i\xe7in ",(0,r.jsx)("a",{href:"/admin/listings",className:"jsx-443df9369397e885",children:"/admin/listings"}),"."]})}),"orders"===e&&(0,r.jsx)(u,{title:"Siparişler",children:(0,r.jsxs)("p",{className:"jsx-443df9369397e885 muted",children:["T\xfcm siparişler ve durum işlemleri i\xe7in ",(0,r.jsx)("a",{href:"/admin/orders",className:"jsx-443df9369397e885",children:"/admin/orders"}),"."]})}),"support"===e&&(0,r.jsx)(u,{title:"Destek",children:(0,r.jsxs)("p",{className:"jsx-443df9369397e885 muted",children:["A\xe7ık konuşmalar ve mesajlaşma i\xe7in ",(0,r.jsx)("a",{href:"/admin/support",className:"jsx-443df9369397e885",children:"/admin/support"}),"."]})}),"payments"===e&&(0,r.jsx)(u,{title:"\xd6demeler",children:(0,r.jsxs)("p",{className:"jsx-443df9369397e885 muted",children:["Dekont onay/red ve premium/vitrin işlemleri i\xe7in ",(0,r.jsx)("a",{href:"/admin/moderation",className:"jsx-443df9369397e885",children:"/admin/moderation"}),"."]})}),"users"===e&&(0,r.jsx)(u,{title:"Kullanıcılar",children:(0,r.jsxs)("p",{className:"jsx-443df9369397e885 muted",children:["T\xfcm kullanıcı listesi, arama ve rol işlemleri i\xe7in ",(0,r.jsx)("a",{href:"/admin/users",className:"jsx-443df9369397e885",children:"/admin/users"}),"."]})})]}),(0,r.jsx)(s(),{id:"443df9369397e885",children:".wrap.jsx-443df9369397e885{display:grid;grid-template-columns:240px 1fr;min-height:100vh;background:#0b0b0b;color:#e5e7eb;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}.side.jsx-443df9369397e885{border-right:1px solid#1f2937;padding:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:12px;position:-webkit-sticky;position:sticky;top:0;height:100vh}.brand.jsx-443df9369397e885{font-weight:800;color:#fff;margin-bottom:8px}.nav.jsx-443df9369397e885{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:6px}.navBtn.jsx-443df9369397e885{all:unset;cursor:pointer;padding:10px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#1f2937;background:#0f172a}.navBtn.on.jsx-443df9369397e885{background:#111827;border-color:#374151}.navBtn.jsx-443df9369397e885:hover{background:#0f172a99}.logout.jsx-443df9369397e885{margin-top:auto;all:unset;cursor:pointer;padding:10px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#ef4444;color:#fff;background:#991b1b;text-align:center}.logout.jsx-443df9369397e885:hover{background:#b91c1c}.main.jsx-443df9369397e885{padding:20px}.cards.jsx-443df9369397e885{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px;margin-bottom:16px}.card.jsx-443df9369397e885{background:#0f172a;border:1px solid#1f2937;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:12px}.k.jsx-443df9369397e885{font-size:12px;color:#94a3b8}.v.jsx-443df9369397e885{font-size:26px;font-weight:800;color:#fff;margin-top:2px}.section.jsx-443df9369397e885{background:#0f172a;border:1px solid#1f2937;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;margin:16px 0}.hd.jsx-443df9369397e885{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid#1f2937;padding:12px 14px}.ttl.jsx-443df9369397e885{font-weight:700}.link.jsx-443df9369397e885{font-size:13px;color:#e5e7eb;text-decoration:none;border:1px solid#374151;padding:6px 10px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.tbl.jsx-443df9369397e885{width:100%;border-collapse:separate;border-spacing:0}.tbl.jsx-443df9369397e885 th.jsx-443df9369397e885,.tbl.jsx-443df9369397e885 td.jsx-443df9369397e885{padding:10px 12px;border-bottom:1px solid#1f2937;font-size:14px}.empty.jsx-443df9369397e885{padding:14px;color:#94a3b8}.muted.jsx-443df9369397e885{color:#94a3b8}@media(max-width:900px){.wrap.jsx-443df9369397e885{grid-template-columns:1fr}.side.jsx-443df9369397e885{position:static;height:auto;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.logout.jsx-443df9369397e885{margin-top:0}}"})]})}function c(e){let{stats:t,pendingList:i,openTickets:n,recentOrders:s}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{style:{fontWeight:800,margin:"0 0 12px"},children:"\xd6n Panel"}),(0,r.jsxs)("div",{className:"cards",children:[(0,r.jsx)(x,{k:"Toplam Sipariş",v:t.orders}),(0,r.jsx)(x,{k:"Onay Bekleyen İlan",v:t.pendingListings}),(0,r.jsx)(x,{k:"A\xe7ık Destek",v:t.openSupport}),(0,r.jsx)(x,{k:"Bekleyen \xd6deme",v:t.pendingPayments}),(0,r.jsx)(x,{k:"Toplam Kullanıcı",v:t.users})]}),(0,r.jsxs)(u,{title:"Bekleyen İşler",children:[(0,r.jsx)(p,{title:"İlan Onay Kuyruğu",href:"/admin/listings",children:0===i.length?(0,r.jsx)("div",{className:"empty",children:"Kuyruk boş."}):(0,r.jsxs)("table",{className:"tbl",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Başlık"}),(0,r.jsx)("th",{children:"Satıcı"}),(0,r.jsx)("th",{children:"Fiyat"}),(0,r.jsx)("th",{children:"Oluşturma"}),(0,r.jsx)("th",{children:"İşlem"})]})}),(0,r.jsx)("tbody",{children:i.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:e.title||"—"}),(0,r.jsx)("td",{children:e.seller_uid||e.seller_id||"—"}),(0,r.jsx)("td",{children:h(e.price)}),(0,r.jsx)("td",{children:m(e.created_at)}),(0,r.jsx)("td",{children:(0,r.jsx)("a",{className:"link",href:"/admin/listings?id=".concat(e.id),children:"Onay/G\xf6r"})})]},e.id))})]})}),(0,r.jsx)(p,{title:"Destek Talepleri",href:"/admin/support",children:0===n.length?(0,r.jsx)("div",{className:"empty",children:"A\xe7ık talep yok."}):(0,r.jsxs)("table",{className:"tbl",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Konu"}),(0,r.jsx)("th",{children:"Kullanıcı"}),(0,r.jsx)("th",{children:"Son Mesaj"}),(0,r.jsx)("th",{children:"İşlem"})]})}),(0,r.jsx)("tbody",{children:n.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:e.subject||"—"}),(0,r.jsx)("td",{children:(e.participants||[]).join(", ")}),(0,r.jsx)("td",{children:m(e.updated_at)}),(0,r.jsx)("td",{children:(0,r.jsx)("a",{className:"link",href:"/admin/support?id=".concat(e.id),children:"A\xe7"})})]},e.id))})]})})]}),(0,r.jsx)(u,{title:"Son Siparişler",href:"/admin/orders",children:0===s.length?(0,r.jsx)("div",{className:"empty",children:"Kayıt yok."}):(0,r.jsxs)("table",{className:"tbl",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Alıcı → Satıcı"}),(0,r.jsx)("th",{children:"Tutar"}),(0,r.jsx)("th",{children:"Durum"}),(0,r.jsx)("th",{children:"Tarih"}),(0,r.jsx)("th",{children:"Detay"})]})}),(0,r.jsx)("tbody",{children:s.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsxs)("td",{children:[e.buyer_uid||"?"," → ",e.seller_uid||"?"]}),(0,r.jsx)("td",{children:h(e.amount)}),(0,r.jsx)("td",{children:e.status||"—"}),(0,r.jsx)("td",{children:m(e.created_at)}),(0,r.jsx)("td",{children:(0,r.jsx)("a",{className:"link",href:"/admin/orders?id=".concat(e.id),children:"G\xf6r"})})]},e.id))})]})})]})}function x(e){let{k:t,v:i}=e;return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"k",children:t}),(0,r.jsx)("div",{className:"v",children:"number"==typeof i?new Intl.NumberFormat("tr-TR").format(i):i})]})}function u(e){let{title:t,href:i,children:n}=e;return(0,r.jsxs)("section",{className:"section",children:[(0,r.jsxs)("div",{className:"hd",children:[(0,r.jsx)("div",{className:"ttl",children:t}),i&&(0,r.jsx)("a",{className:"link",href:i,children:"T\xfcm\xfcn\xfc g\xf6r"})]}),(0,r.jsx)("div",{style:{padding:"10px 14px"},children:n})]})}function p(e){let{title:t,href:i,children:n}=e;return(0,r.jsxs)("div",{className:"section",style:{margin:"12px 0"},children:[(0,r.jsxs)("div",{className:"hd",children:[(0,r.jsx)("div",{className:"ttl",children:t}),i&&(0,r.jsx)("a",{className:"link",href:i,children:"T\xfcm\xfcn\xfc g\xf6r"})]}),(0,r.jsx)("div",{style:{padding:"10px 14px"},children:n})]})}function m(e){try{if(!e)return"—";return new Date("string"==typeof e?e:(null==e?void 0:e.seconds)?1e3*e.seconds:e).toLocaleString("tr-TR")}catch(e){return"—"}}function h(e){return"number"!=typeof e?"—":new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",maximumFractionDigits:0}).format(e)}},3977:function(e,t,i){"use strict";i.d(t,{Mq:function(){return r.Mq},getApps:function(){return r.C6},initializeApp:function(){return r.ZF}});var r=i(6771);(0,r.KN)("firebase","12.4.0","app")},5876:function(e,t,i){"use strict";i.d(t,{w9:function(){return r.W},hJ:function(){return r.Y},Xb:function(){return r.ab},getAuth:function(){return r.p},onAuthStateChanged:function(){return r.z},aF:function(){return r.a4},w$:function(){return r.ah},LS:function(){return r.a6},signInAnonymously:function(){return r.a1},e5:function(){return r.ac},rh:function(){return r.d},w7:function(){return r.D},gQ:function(){return r.an},ck:function(){return r.al}});var r=i(9199);i(6771),i(9711),i(4645),i(75)}},function(e){e.O(0,[281,703,645,771,229,888,774,179],function(){return e(e.s=7953)}),_N_E=e.O()}]);