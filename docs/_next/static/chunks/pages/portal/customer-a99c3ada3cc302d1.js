(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[213],{4821:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/portal/customer",function(){return s(2343)}])},2343:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return o}});var r=s(5893),i=s(7294),t=s(9008),n=s.n(t);let l=()=>Math.random().toString(36).slice(2,10);function d(e){window.location.href=e}function o(){let{authed:e,setAuthed:a}=function(){let[e,a]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{a("1"===localStorage.getItem("authed"))},[]),{authed:e,setAuthed:a}}(),[s,t]=(0,i.useState)("browse"),[o,c]=(0,i.useState)([]),[p,m]=(0,i.useState)([]),[x,g]=(0,i.useState)({}),[h,u]=(0,i.useState)({});(0,i.useEffect)(()=>{let e=!0;return(async()=>{try{let a=await fetch("/ads.json",{cache:"no-store"});if(a.ok){let s=await a.json();e&&c(Array.isArray(s)?s.slice(0,50):[])}else throw 0}catch(a){try{let a=JSON.parse(localStorage.getItem("ads")||"[]");e&&c(Array.isArray(a)?a.slice(0,50):[])}catch(a){e&&c([])}}try{m(JSON.parse(localStorage.getItem("orders")||"[]"))}catch(e){}try{g(JSON.parse(localStorage.getItem("reviews")||"{}"))}catch(e){}try{u(JSON.parse(localStorage.getItem("threads")||"{}"))}catch(e){}})(),()=>{e=!1}},[]);let f=e=>{m(e),localStorage.setItem("orders",JSON.stringify(e))},b=e=>{g(e),localStorage.setItem("reviews",JSON.stringify(e))},j=e=>{u(e),localStorage.setItem("threads",JSON.stringify(e))};function v(e,a){f(p.map(s=>s.id===e?{...s,status:a}:s))}function y(e,a,s){var r;b({...x,[e]:{stars:a,text:s||(null===(r=x[e])||void 0===r?void 0:r.text)||"",at:new Date().toISOString()}})}let N="\n    :root{--ink:#0f172a;--line:#e5e7eb;--muted:#475569}\n    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;color:var(--ink)}\n    .wrap{max-width:1100px;margin:0 auto;padding:18px 16px}\n    .top{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-bottom:12px}\n    .brand{display:flex;gap:8px;align-items:center}\n    .brand img{border-radius:12px}\n    .tabs{display:flex;gap:8px;flex-wrap:wrap}\n    .tab{padding:10px 12px;border:1px solid var(--line);background:#fff;border-radius:10px;cursor:pointer;font-weight:700}\n    .tab.active{background:#111827;color:#fff;border-color:#111827}\n    .ghost{padding:10px 12px;border-radius:10px;border:1px solid var(--line);background:#fff;font-weight:700;cursor:pointer}\n    .primary{padding:10px 12px;border-radius:10px;border:1px solid #111827;background:#111827;color:#fff;font-weight:800;cursor:pointer}\n    .note{margin:8px 0 12px;color:var(--muted);font-size:14px}\n    .grid{display:grid;gap:14px;grid-template-columns:1fr 1fr}\n    @media (max-width:880px){ .grid{grid-template-columns:1fr} }\n    .cards{display:grid;gap:14px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}\n    .card{background:#fff;border:1px solid var(--line);border-radius:14px;box-shadow:0 6px 18px rgba(0,0,0,.05);overflow:hidden}\n    .hd{padding:10px 12px;border-bottom:1px solid var(--line);font-weight:800}\n    .bd{padding:12px}\n    .thumb{width:100%;aspect-ratio:4/3;background:#f1f5f9;background-size:cover;background-position:center}\n    .title{margin:8px 0 6px;font-weight:800}\n    .meta{display:flex;justify-content:space-between;color:var(--muted);font-size:13px}\n    .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}\n    .star{font-size:20px;cursor:pointer}\n    .star.off{opacity:.35}\n    .msgbox{display:flex;gap:8px;margin-top:8px}\n    .msgbox input{flex:1;padding:10px;border-radius:10px;border:1px solid var(--line)}\n    .badge{display:inline-block;border:1px solid var(--line);border-radius:999px;padding:2px 8px;font-size:12px}\n    .order{display:grid;grid-template-columns:88px 1fr auto;gap:10px;align-items:center;border:1px solid var(--line);border-radius:12px;padding:8px}\n    .othumb{width:88px;height:66px;background:#f1f5f9;border-radius:8px;background-size:cover;background-position:center}\n    .status{font-size:12px}\n    .danger{border:1px solid #fecaca;background:#fee2e2;color:#991b1b;border-radius:10px;padding:8px 10px}\n  ";return e?(0,r.jsxs)("main",{className:"wrap",children:[(0,r.jsx)(n(),{children:(0,r.jsx)("title",{children:"M\xfcşteri Portalı • Panel"})}),(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:N}}),(0,r.jsxs)("div",{className:"top",children:[(0,r.jsxs)("div",{className:"brand",children:[(0,r.jsx)("img",{src:"/logo.png",alt:"",width:"40",height:"40"}),(0,r.jsx)("strong",{children:"M\xfcşteri Portalı"})]}),(0,r.jsxs)("div",{className:"tabs",children:[["browse","orders","messages","profile"].map(e=>(0,r.jsxs)("button",{className:"tab ".concat(s===e?"active":""),onClick:()=>t(e),children:["browse"===e&&"İlanlar","orders"===e&&"Siparişlerim","messages"===e&&"Mesajlar","profile"===e&&"Profil"]},e)),(0,r.jsx)("button",{className:"ghost",onClick:()=>d("/"),children:"Ana sayfa"})]})]}),"browse"===s&&(0,r.jsxs)("section",{children:[(0,r.jsx)("div",{className:"note",children:"İlanlara puan verin ★ ve yorum yazın. “Sepete Ekle” demeden sipariş oluşturmaz."}),(0,r.jsx)("div",{className:"cards",children:0===o.length?(0,r.jsx)("div",{className:"danger",style:{marginTop:8},children:"Hen\xfcz ilan yok."}):o.map((e,a)=>{var s,i;let n=null!==(i=null!==(s=e.id)&&void 0!==s?s:e.slug)&&void 0!==i?i:String(a),o=x[n]||{stars:0,text:""};return(0,r.jsxs)("article",{className:"card",children:[(0,r.jsx)("div",{className:"thumb",style:e.img?{backgroundImage:"url(".concat(e.img,")")}:void 0}),(0,r.jsxs)("div",{className:"bd",children:[(0,r.jsx)("div",{className:"title",children:e.title||"İlan"}),(0,r.jsxs)("div",{className:"meta",children:[(0,r.jsx)("span",{children:e.cat||e.category||"-"}),(0,r.jsx)("b",{children:e.price||""})]}),(0,r.jsxs)("div",{className:"row",children:[[1,2,3,4,5].map(e=>(0,r.jsx)("span",{className:"star ".concat(o.stars>=e?"":"off"),onClick:()=>y(n,e,o.text),role:"button","aria-label":"".concat(e," yıldız"),children:"★"},e)),(0,r.jsxs)("span",{className:"badge",children:[o.stars||0,"/5"]})]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("input",{type:"text",placeholder:"Yorum yazın (g\xf6r\xfcn\xfcr değildir, demo)",defaultValue:o.text||"",onBlur:e=>y(n,o.stars||0,e.target.value)})}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("button",{className:"primary",onClick:()=>{var a,s;f([{id:l(),adId:null!==(s=null!==(a=e.id)&&void 0!==a?a:e.slug)&&void 0!==s?s:l(),title:e.title||"\xdcr\xfcn",price:e.price||"",img:e.img||"",status:"hazırlanıyor",created_at:new Date().toISOString()},...p]),alert("Sipariş verildi (demo). Mesajlaşma ve kargo takibi aktif."),t("orders")},children:"Sepete Ekle"}),(0,r.jsx)("button",{className:"ghost",onClick:()=>d(e.url||"/ads/".concat(e.slug||n)),children:"İncele"})]}),(0,r.jsxs)("div",{className:"msgbox",children:[(0,r.jsx)("input",{id:"msg-".concat(n),placeholder:"Satıcıya mesaj yaz (demo)"}),(0,r.jsx)("button",{className:"ghost",onClick:()=>{let e=document.getElementById("msg-".concat(n));e&&(!function(e,a){if(!a.trim())return;let s={id:l(),text:a,at:new Date().toISOString(),from:"me"};j({...h,[e]:[s,...h[e]||[]]})}(n,e.value),e.value="",t("messages"))},children:"G\xf6nder"})]})]})]},n)})})]}),"orders"===s&&(0,r.jsx)("section",{children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("div",{className:"hd",children:["Siparişlerim (",p.length,")"]}),(0,r.jsx)("div",{className:"bd",children:p.length?p.map(e=>(0,r.jsxs)("div",{className:"order",children:[(0,r.jsx)("div",{className:"othumb",style:e.img?{backgroundImage:"url(".concat(e.img,")")}:void 0}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontWeight:800},children:e.title}),(0,r.jsxs)("div",{className:"status",children:["Durum: ",(0,r.jsx)("b",{children:e.status})]}),(0,r.jsxs)("div",{className:"row",style:{marginTop:6},children:[(0,r.jsx)("button",{className:"ghost",onClick:()=>alert("\xdcr\xfcn\xfcm nerede? (demo): Tahmini teslimat 2-3 g\xfcn."),children:"\xdcr\xfcn\xfcm nerede?"}),"kargoda"!==e.status&&(0,r.jsx)("button",{className:"ghost",onClick:()=>v(e.id,"kargoda"),children:"Kargoya verildi"}),"teslim edildi"!==e.status&&(0,r.jsx)("button",{className:"primary",onClick:()=>v(e.id,"teslim edildi"),children:"Teslim aldım"})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"badge",children:e.price||"-"})})]},e.id)):(0,r.jsx)("p",{className:"note",children:"Hen\xfcz sipariş yok."})})]})}),"messages"===s&&(0,r.jsx)("section",{children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"hd",children:"Mesajlar (demo)"}),(0,r.jsx)("div",{className:"bd",children:0===Object.keys(h).length?(0,r.jsx)("p",{className:"note",children:"Hen\xfcz mesaj yok. “İlanlar” sekmesinden satıcıya yazabilirsiniz."}):Object.entries(h).map(e=>{let[a,s]=e;return(0,r.jsxs)("div",{style:{border:"1px solid var(--line)",borderRadius:12,padding:8,marginBottom:10},children:[(0,r.jsxs)("div",{style:{fontWeight:800,marginBottom:6},children:["İlan #",a]}),(0,r.jsx)("div",{style:{display:"grid",gap:6},children:s.map(e=>(0,r.jsxs)("div",{style:{background:"me"===e.from?"#ecfeff":"#f1f5f9",border:"1px solid var(--line)",borderRadius:10,padding:"6px 8px"},children:[(0,r.jsx)("b",{children:"me"===e.from?"Ben":"Satıcı"}),": ",e.text]},e.id))})]},a)})})]})}),"profile"===s&&(0,r.jsx)("section",{children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"hd",children:"Profil"}),(0,r.jsxs)("div",{className:"bd",children:[(0,r.jsx)("p",{className:"note",children:"Ger\xe7ek profil ve \xf6deme bilgileri daha sonra eklenecek."}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("button",{className:"ghost",onClick:()=>{localStorage.removeItem("authed"),a(!1),d("/")},children:"\xc7ıkış Yap"})})]})]})})]}):(0,r.jsxs)("main",{className:"wrap",children:[(0,r.jsx)(n(),{children:(0,r.jsx)("title",{children:"M\xfcşteri Portalı • Giriş Gerekli"})}),(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:N}}),(0,r.jsxs)("div",{className:"top",children:[(0,r.jsxs)("div",{className:"brand",children:[(0,r.jsx)("img",{src:"/logo.png",alt:"",width:"40",height:"40"}),(0,r.jsx)("strong",{children:"M\xfcşteri Portalı"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{className:"ghost",onClick:()=>d("/"),children:"Ana sayfa"}),(0,r.jsx)("button",{className:"primary",onClick:()=>d("/login?role=customer"),children:"Giriş / Kayıt"})]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"hd",children:"Erişim Kısıtlı"}),(0,r.jsxs)("div",{className:"bd",children:[(0,r.jsxs)("p",{className:"note",children:["Bu alana erişmek i\xe7in \xf6nce ",(0,r.jsx)("b",{children:"Giriş"})," yapmalısınız. (Test i\xe7in /login sayfasında giriş yaptığınızda tarayıcıya ",(0,r.jsx)("code",{children:"authed=1"})," kaydedilir.)"]}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("button",{className:"primary",onClick:()=>d("/login?role=customer"),children:"Giriş Yap"}),(0,r.jsx)("button",{className:"ghost",onClick:()=>d("/"),children:"Ana sayfa"})]})]})]})]})}},9008:function(e,a,s){e.exports=s(3867)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=4821)}),_N_E=e.O()}]);