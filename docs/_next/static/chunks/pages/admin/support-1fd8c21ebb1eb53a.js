(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{9275:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/support",function(){return i(1129)}])},6831:function(e,t,i){"use strict";i.d(t,{I:function(){return o},db:function(){return l}});var a=i(3977),n=i(5876),r=i(9828);let s=(0,a.getApps)().length?(0,a.Mq)():(0,a.initializeApp)({apiKey:"AIzaSyCd9GjP6CDA8i4XByhXDHyESy-g_DHVwvQ",authDomain:"ureteneller-ecaac.firebaseapp.com",projectId:"ureteneller-ecaac",storageBucket:"ureteneller-ecaac.firebasestorage.app",messagingSenderId:"368042877151",appId:"1:368042877151:web:ee0879fc4717928079c96a",measurementId:"G-BJHKN8V4RQ"}),o=(0,n.getAuth)(s),l=(0,r.getFirestore)(s)},1129:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var a=i(5893),n=i(645),r=i.n(n),s=i(7294),o=i(6831),l=i(5876),d=i(9828);function c(){s.useEffect(()=>{try{"ok"===localStorage.getItem("ue_admin_auth")||document.cookie.includes("ue_admin=1")||location.replace("/admin/login/")}catch(e){}},[]),s.useEffect(()=>(0,l.onAuthStateChanged)(o.I,()=>{}),[]);let[e,t]=s.useState([]),[i,n]=s.useState(""),[r,c]=s.useState(!1),[p,u]=s.useState("");async function f(){c(!0),u("");try{let e=await (0,d.PL)((0,d.query)((0,d.collection)(o.db,"conversations"),(0,d.where)("status","==","open"),(0,d.b9)(200)));t(e.docs.map(e=>({id:e.id,...e.data()})))}catch(e){u((null==e?void 0:e.message)||String(e))}finally{c(!1)}}s.useEffect(()=>{f()},[]);let m=s.useMemo(()=>{let t=i.trim().toLowerCase();return t?e.filter(e=>[e.id,e.topic,Array.isArray(e.participants)?e.participants.join(", "):"",e.status].join(" ").toLowerCase().includes(t)):e},[e,i]);async function h(e){try{await (0,d.r7)((0,d.doc)(o.db,"conversations",e.id),{status:"closed"}),t(t=>t.filter(t=>t.id!==e.id))}catch(e){alert("Kapanamadı: "+((null==e?void 0:e.message)||e))}}return(0,a.jsxs)(b,{active:"support",children:[(0,a.jsx)("h1",{children:"Destek"}),(0,a.jsxs)("div",{className:"toolbar",children:[(0,a.jsx)("input",{className:"search",placeholder:"Konu/UID/katılımcı ara…",value:i,onChange:e=>n(e.target.value)}),(0,a.jsx)("div",{className:"spacer"}),(0,a.jsx)("button",{className:"btn",onClick:f,disabled:r,children:"Yenile"})]}),p&&(0,a.jsxs)("div",{className:"err",children:["Hata: ",p]}),(0,a.jsx)("div",{className:"tableWrap",children:(0,a.jsxs)("table",{className:"tbl",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID"}),(0,a.jsx)("th",{children:"Konu"}),(0,a.jsx)("th",{children:"Katılımcılar"}),(0,a.jsx)("th",{children:"Durum"}),(0,a.jsx)("th",{children:"İşlem"})]})}),(0,a.jsx)("tbody",{children:0===m.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"empty",children:"A\xe7ık talep yok."})}):m.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"mono",children:e.id}),(0,a.jsx)("td",{children:e.topic||"—"}),(0,a.jsx)("td",{children:Array.isArray(e.participants)?e.participants.join(", "):"—"}),(0,a.jsx)("td",{children:e.status||"—"}),(0,a.jsx)("td",{className:"actions",children:(0,a.jsx)("button",{className:"btn",onClick:()=>h(e),children:"Kapat"})})]},e.id))})]})}),(0,a.jsx)(x,{})]})}function b(e){let{active:t,children:i}=e;return(0,a.jsxs)("div",{className:"wrap",children:[(0,a.jsxs)("aside",{className:"side",children:[(0,a.jsx)("div",{className:"brand",children:"R \xb7 Admin"}),(0,a.jsxs)("nav",{className:"nav",children:[(0,a.jsx)("a",{className:"navBtn",href:"/admin/",children:"\xd6n Panel"}),(0,a.jsx)("a",{className:"navBtn",href:"/admin/listings",children:"İlanlar"}),(0,a.jsx)("a",{className:"navBtn",href:"/admin/orders",children:"Siparişler"}),(0,a.jsx)("a",{className:"navBtn "+("support"===t?"on":""),href:"/admin/support",children:"Destek"}),(0,a.jsx)("a",{className:"navBtn",href:"/admin/moderation",children:"\xd6demeler"}),(0,a.jsx)("a",{className:"navBtn",href:"/admin/users",children:"Kullanıcılar"})]}),(0,a.jsx)("button",{className:"logout",onClick:()=>{try{localStorage.removeItem("ue_admin_auth")}catch(e){}document.cookie="ue_admin=; Max-Age=0; Path=/; SameSite=Lax; Secure",location.href="/admin/login/"},children:"\xc7ıkış"})]}),(0,a.jsx)("main",{className:"main",children:i})]})}function x(){return(0,a.jsx)(r(),{id:"717592bf235be94f",children:".wrap.jsx-717592bf235be94f{display:grid;grid-template-columns:240px 1fr;min-height:100vh;background:#0b0b0b;color:#e5e7eb;font-family:system-ui}.side.jsx-717592bf235be94f{border-right:1px solid#1f2937;padding:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:12px;position:-webkit-sticky;position:sticky;top:0;height:100vh}.brand.jsx-717592bf235be94f{font-weight:800;color:#fff;margin-bottom:8px}.nav.jsx-717592bf235be94f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:6px}.navBtn.jsx-717592bf235be94f{display:block;padding:10px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#1f2937;background:#0f172a;text-decoration:none;color:#e5e7eb}.navBtn.on.jsx-717592bf235be94f{background:#111827;border-color:#374151}.logout.jsx-717592bf235be94f{margin-top:auto;all:unset;cursor:pointer;padding:10px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#ef4444;color:#fff;background:#991b1b;text-align:center}.main.jsx-717592bf235be94f{padding:20px}.toolbar.jsx-717592bf235be94f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px;margin:0 0 12px}.search.jsx-717592bf235be94f{-webkit-box-flex:0;-webkit-flex:0 0 360px;-moz-box-flex:0;-ms-flex:0 0 360px;flex:0 0 360px;max-width:100%;background:#0f172a;border:1px solid#334155;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;padding:10px 12px;color:#e5e7eb}.spacer.jsx-717592bf235be94f{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.btn.jsx-717592bf235be94f{all:unset;cursor:pointer;padding:8px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#374151;background:#111827}.tableWrap.jsx-717592bf235be94f{overflow:auto;border:1px solid#1f2937;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px}.tbl.jsx-717592bf235be94f{width:100%;border-collapse:separate;border-spacing:0}.tbl.jsx-717592bf235be94f th.jsx-717592bf235be94f,.tbl.jsx-717592bf235be94f td.jsx-717592bf235be94f{padding:10px 12px;border-bottom:1px solid#1f2937;font-size:14px;vertical-align:middle}.tbl.jsx-717592bf235be94f thead.jsx-717592bf235be94f th.jsx-717592bf235be94f{position:-webkit-sticky;position:sticky;top:0;background:#0b0b0b}.mono.jsx-717592bf235be94f{font-family:ui-monospace,Menlo,monospace;font-size:12px}.empty.jsx-717592bf235be94f{color:#94a3b8;text-align:center}.actions.jsx-717592bf235be94f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:6px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}"})}},3977:function(e,t,i){"use strict";i.d(t,{Mq:function(){return a.Mq},getApps:function(){return a.C6},initializeApp:function(){return a.ZF}});var a=i(6771);(0,a.KN)("firebase","12.4.0","app")},5876:function(e,t,i){"use strict";i.d(t,{w9:function(){return a.W},hJ:function(){return a.Y},Xb:function(){return a.ab},getAuth:function(){return a.p},onAuthStateChanged:function(){return a.z},aF:function(){return a.a4},w$:function(){return a.ah},LS:function(){return a.a6},signInAnonymously:function(){return a.a1},e5:function(){return a.ac},rh:function(){return a.d},w7:function(){return a.D},gQ:function(){return a.an},ck:function(){return a.al}});var a=i(9199);i(6771),i(9711),i(4645),i(75)}},function(e){e.O(0,[281,703,645,771,229,888,774,179],function(){return e(e.s=9275)}),_N_E=e.O()}]);