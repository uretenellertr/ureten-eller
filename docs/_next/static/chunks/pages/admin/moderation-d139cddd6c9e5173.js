(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[212],{6446:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/moderation",function(){return n(3909)}])},6831:function(e,i,n){"use strict";n.d(i,{I:function(){return o},db:function(){return c}});var t=n(3977),r=n(5876),a=n(9828);let s=(0,t.getApps)().length?(0,t.Mq)():(0,t.initializeApp)({apiKey:"AIzaSyCd9GjP6CDA8i4XByhXDHyESy-g_DHVwvQ",authDomain:"ureteneller-ecaac.firebaseapp.com",projectId:"ureteneller-ecaac",storageBucket:"ureteneller-ecaac.firebasestorage.app",messagingSenderId:"368042877151",appId:"1:368042877151:web:ee0879fc4717928079c96a",measurementId:"G-BJHKN8V4RQ"}),o=(0,r.getAuth)(s),c=(0,a.getFirestore)(s)},3909:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return l}});var t=n(5893),r=n(645),a=n.n(r),s=n(7294),o=n(6831),c=n(5876),d=n(9828);function l(){s.useEffect(()=>{try{"ok"===localStorage.getItem("ue_admin_auth")||document.cookie.includes("ue_admin=1")||location.replace("/admin/login/")}catch(e){}},[]),s.useEffect(()=>(0,c.onAuthStateChanged)(o.I,()=>{}),[]);let[e,i]=s.useState([]),[n,r]=s.useState(!1),[a,l]=s.useState("");async function f(){r(!0),l("");try{let e=await (0,d.PL)((0,d.query)((0,d.collection)(o.db,"payments"),(0,d.where)("status","==","pending_admin"),(0,d.b9)(200)));i(e.docs.map(e=>({id:e.id,...e.data()})))}catch(e){l((null==e?void 0:e.message)||String(e))}finally{r(!1)}}async function p(e){try{await (0,d.r7)((0,d.doc)(o.db,"payments",e.id),{status:"approved"}),"premium"===e.type&&e.user_id&&await (0,d.r7)((0,d.doc)(o.db,"users",e.user_id),{"premium.approved":!0,"premium.active":!0}),"showcase"===e.type&&e.listing_id&&await (0,d.r7)((0,d.doc)(o.db,"listings",e.listing_id),{featured:!0}),i(i=>i.filter(i=>i.id!==e.id))}catch(e){alert("Onaylanamadı: "+((null==e?void 0:e.message)||e))}}async function m(e){try{await (0,d.r7)((0,d.doc)(o.db,"payments",e.id),{status:"rejected"}),i(i=>i.filter(i=>i.id!==e.id))}catch(e){alert("Reddedilemedi: "+((null==e?void 0:e.message)||e))}}return s.useEffect(()=>{f()},[]),(0,t.jsxs)(x,{active:"moderation",children:[(0,t.jsx)("h1",{children:"\xd6demeler"}),(0,t.jsxs)("div",{className:"toolbar",children:[(0,t.jsx)("div",{className:"spacer"}),(0,t.jsx)("button",{className:"btn",onClick:f,disabled:n,children:"Yenile"})]}),a&&(0,t.jsxs)("div",{className:"err",children:["Hata: ",a]}),(0,t.jsx)("div",{className:"tableWrap",children:(0,t.jsxs)("table",{className:"tbl",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"ID"}),(0,t.jsx)("th",{children:"Kullanıcı"}),(0,t.jsx)("th",{children:"Tip"}),(0,t.jsx)("th",{children:"Tutar"}),(0,t.jsx)("th",{children:"Tarih"}),(0,t.jsx)("th",{children:"Dekont"}),(0,t.jsx)("th",{children:"İşlem"})]})}),(0,t.jsx)("tbody",{children:0===e.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"empty",children:"Kayıt yok."})}):e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"mono",children:e.id}),(0,t.jsx)("td",{className:"mono",children:e.user_id||"—"}),(0,t.jsx)("td",{children:e.type}),(0,t.jsx)("td",{children:e.amount?"₺".concat(e.amount):"—"}),(0,t.jsx)("td",{children:e.created_at||"—"}),(0,t.jsx)("td",{children:e.receipt_url?(0,t.jsx)("a",{className:"link",href:e.receipt_url,target:"_blank",rel:"noreferrer",children:"G\xf6r"}):"—"}),(0,t.jsxs)("td",{className:"actions",children:[(0,t.jsx)("button",{className:"btn",onClick:()=>p(e),children:"Onayla"}),(0,t.jsx)("button",{className:"btn",onClick:()=>m(e),children:"Reddet"})]})]},e.id))})]})}),(0,t.jsx)(u,{})]})}function x(e){let{active:i,children:n}=e;return(0,t.jsxs)("div",{className:"wrap",children:[(0,t.jsxs)("aside",{className:"side",children:[(0,t.jsx)("div",{className:"brand",children:"R \xb7 Admin"}),(0,t.jsxs)("nav",{className:"nav",children:[(0,t.jsx)("a",{className:"navBtn",href:"/admin/",children:"\xd6n Panel"}),(0,t.jsx)("a",{className:"navBtn",href:"/admin/listings",children:"İlanlar"}),(0,t.jsx)("a",{className:"navBtn",href:"/admin/orders",children:"Siparişler"}),(0,t.jsx)("a",{className:"navBtn",href:"/admin/support",children:"Destek"}),(0,t.jsx)("a",{className:"navBtn "+("moderation"===i?"on":""),href:"/admin/moderation",children:"\xd6demeler"}),(0,t.jsx)("a",{className:"navBtn",href:"/admin/users",children:"Kullanıcılar"})]}),(0,t.jsx)("button",{className:"logout",onClick:()=>{try{localStorage.removeItem("ue_admin_auth")}catch(e){}document.cookie="ue_admin=; Max-Age=0; Path=/; SameSite=Lax; Secure",location.href="/admin/login/"},children:"\xc7ıkış"})]}),(0,t.jsx)("main",{className:"main",children:n})]})}function u(){return(0,t.jsx)(a(),{id:"8133827f7c90f45c",children:".wrap.jsx-8133827f7c90f45c{display:grid;grid-template-columns:240px 1fr;min-height:100vh;background:#0b0b0b;color:#e5e7eb;font-family:system-ui}.side.jsx-8133827f7c90f45c{border-right:1px solid#1f2937;padding:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:12px;position:-webkit-sticky;position:sticky;top:0;height:100vh}.brand.jsx-8133827f7c90f45c{font-weight:800;color:#fff;margin-bottom:8px}.nav.jsx-8133827f7c90f45c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:6px}.navBtn.jsx-8133827f7c90f45c{display:block;padding:10px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#1f2937;background:#0f172a;text-decoration:none;color:#e5e7eb}.navBtn.on.jsx-8133827f7c90f45c{background:#111827;border-color:#374151}.logout.jsx-8133827f7c90f45c{margin-top:auto;all:unset;cursor:pointer;padding:10px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#ef4444;color:#fff;background:#991b1b;text-align:center}.main.jsx-8133827f7c90f45c{padding:20px}.toolbar.jsx-8133827f7c90f45c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px;margin:0 0 12px}.spacer.jsx-8133827f7c90f45c{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.btn.jsx-8133827f7c90f45c{all:unset;cursor:pointer;padding:8px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#374151;background:#111827}.tableWrap.jsx-8133827f7c90f45c{overflow:auto;border:1px solid#1f2937;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px}.tbl.jsx-8133827f7c90f45c{width:100%;border-collapse:separate;border-spacing:0}.tbl.jsx-8133827f7c90f45c th.jsx-8133827f7c90f45c,.tbl.jsx-8133827f7c90f45c td.jsx-8133827f7c90f45c{padding:10px 12px;border-bottom:1px solid#1f2937;font-size:14px;vertical-align:middle}.tbl.jsx-8133827f7c90f45c thead.jsx-8133827f7c90f45c th.jsx-8133827f7c90f45c{position:-webkit-sticky;position:sticky;top:0;background:#0b0b0b}.mono.jsx-8133827f7c90f45c{font-family:ui-monospace,Menlo,monospace;font-size:12px}.empty.jsx-8133827f7c90f45c{color:#94a3b8;text-align:center}.actions.jsx-8133827f7c90f45c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:6px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.link.jsx-8133827f7c90f45c{font-size:13px;color:#e5e7eb;text-decoration:none;border:1px solid#374151;padding:6px 10px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}"})}},3977:function(e,i,n){"use strict";n.d(i,{Mq:function(){return t.Mq},getApps:function(){return t.C6},initializeApp:function(){return t.ZF}});var t=n(6771);(0,t.KN)("firebase","12.4.0","app")},5876:function(e,i,n){"use strict";n.d(i,{w9:function(){return t.W},hJ:function(){return t.Y},Xb:function(){return t.ab},getAuth:function(){return t.p},onAuthStateChanged:function(){return t.z},aF:function(){return t.a4},w$:function(){return t.ah},LS:function(){return t.a6},signInAnonymously:function(){return t.a1},e5:function(){return t.ac},rh:function(){return t.d},w7:function(){return t.D},gQ:function(){return t.an},ck:function(){return t.al}});var t=n(9199);n(6771),n(9711),n(4645),n(75)}},function(e){e.O(0,[281,703,645,771,229,888,774,179],function(){return e(e.s=6446)}),_N_E=e.O()}]);