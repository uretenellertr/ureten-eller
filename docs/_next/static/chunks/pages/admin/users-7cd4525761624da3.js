(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{5356:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return s(5120)}])},6831:function(e,a,s){"use strict";s.d(a,{I:function(){return o},db:function(){return c}});var i=s(3977),r=s(5876),n=s(9828);let t=(0,i.getApps)().length?(0,i.Mq)():(0,i.initializeApp)({apiKey:"AIzaSyCd9GjP6CDA8i4XByhXDHyESy-g_DHVwvQ",authDomain:"ureteneller-ecaac.firebaseapp.com",projectId:"ureteneller-ecaac",storageBucket:"ureteneller-ecaac.firebasestorage.app",messagingSenderId:"368042877151",appId:"1:368042877151:web:ee0879fc4717928079c96a",measurementId:"G-BJHKN8V4RQ"}),o=(0,r.getAuth)(t),c=(0,n.getFirestore)(t)},5120:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return b}});var i=s(5893),r=s(645),n=s.n(r),t=s(7294),o=s(6831),c=s(5876),l=s(9828);function b(){t.useEffect(()=>{try{"ok"===localStorage.getItem("ue_admin_auth")||document.cookie.includes("ue_admin=1")||window.location.replace("/admin/login/")}catch(e){}},[]);let[e,a]=t.useState(!1),[s,r]=t.useState(null);t.useEffect(()=>{let e=(0,c.onAuthStateChanged)(o.I,e=>{r(e),a(!0)});return()=>e()},[]);let[b,d]=t.useState([]),[x,f]=t.useState(null),[u,m]=t.useState(!1),[p,j]=t.useState(""),[h,g]=t.useState("");async function w(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];j(""),m(!0);try{let a;if(!e)try{a=(0,l.query)((0,l.collection)(o.db,"users"),(0,l.Xo)("created_at","desc"),(0,l.b9)(50));let e=await (0,l.PL)(a),s=e.docs.map(e=>({id:e.id,...e.data()}));d(s),f(e.docs.at(-1)||null),m(!1);return}catch(e){}let s=(0,l.query)((0,l.collection)(o.db,"users"),(0,l.Xo)("email","asc"),(0,l.b9)(50)),i=e&&x?(0,l.query)(s,(0,l.TQ)(x)):s,r=await (0,l.PL)(i),n=r.docs.map(e=>({id:e.id,...e.data()}));d(e?[...b,...n]:n),f(r.docs.at(-1)||null)}catch(e){j((null==e?void 0:e.message)||String(e))}finally{m(!1)}}async function k(e,a){try{await (0,l.r7)((0,l.doc)(o.db,"users",e.id),{role:a}),d(s=>s.map(s=>s.id===e.id?{...s,role:a}:s))}catch(e){alert("Rol g\xfcncellenemedi: "+((null==e?void 0:e.message)||e))}}async function y(e,a){try{await (0,l.r7)((0,l.doc)(o.db,"users",e.id),{status:a}),d(s=>s.map(s=>s.id===e.id?{...s,status:a}:s))}catch(e){alert("Durum g\xfcncellenemedi: "+((null==e?void 0:e.message)||e))}}t.useEffect(()=>{e&&s&&w(!1)},[e,s]);let N=t.useMemo(()=>{let e=h.trim().toLowerCase();return e?b.filter(a=>[a.id,a.email,a.full_name,a.displayName,a.username,a.handle,a.city,a.status,a.role].filter(Boolean).join(" ").toLowerCase().includes(e)):b},[h,b]);return(0,i.jsxs)("div",{className:"jsx-4bb82fcea4244310 wrap",children:[(0,i.jsxs)("aside",{className:"jsx-4bb82fcea4244310 side",children:[(0,i.jsx)("div",{className:"jsx-4bb82fcea4244310 brand",children:"R \xb7 Admin"}),(0,i.jsxs)("nav",{className:"jsx-4bb82fcea4244310 nav",children:[(0,i.jsx)("a",{href:"/admin/",className:"jsx-4bb82fcea4244310 navBtn",children:"\xd6n Panel"}),(0,i.jsx)("a",{href:"/admin/listings",className:"jsx-4bb82fcea4244310 navBtn",children:"İlanlar"}),(0,i.jsx)("a",{href:"/admin/orders",className:"jsx-4bb82fcea4244310 navBtn",children:"Siparişler"}),(0,i.jsx)("a",{href:"/admin/support",className:"jsx-4bb82fcea4244310 navBtn",children:"Destek"}),(0,i.jsx)("a",{href:"/admin/moderation",className:"jsx-4bb82fcea4244310 navBtn",children:"\xd6demeler"}),(0,i.jsx)("a",{href:"/admin/users",className:"jsx-4bb82fcea4244310 navBtn on",children:"Kullanıcılar"})]}),(0,i.jsx)("button",{onClick:()=>{try{localStorage.removeItem("ue_admin_auth")}catch(e){}document.cookie="ue_admin=; Max-Age=0; Path=/; SameSite=Lax; Secure",location.href="/admin/login/"},className:"jsx-4bb82fcea4244310 logout",children:"\xc7ıkış"})]}),(0,i.jsxs)("main",{className:"jsx-4bb82fcea4244310 main",children:[(0,i.jsx)("h1",{style:{fontWeight:800,margin:"0 0 12px"},className:"jsx-4bb82fcea4244310",children:"Kullanıcılar"}),!s&&(0,i.jsxs)("div",{className:"jsx-4bb82fcea4244310 warn",children:["Ger\xe7ek veriyi g\xf6rmek ve işlem yapmak i\xe7in ",(0,i.jsx)("a",{href:"/login",className:"jsx-4bb82fcea4244310",children:"/login"})," sayfasından Firebase hesabınızla giriş yapın (hesabınızın ",(0,i.jsxs)("b",{className:"jsx-4bb82fcea4244310",children:["users/","{uid}",' → role = "admin"']})," olması gerekir)."]}),(0,i.jsxs)("div",{className:"jsx-4bb82fcea4244310 toolbar",children:[(0,i.jsx)("input",{placeholder:"E-posta, ad, UID ara…",value:h,onChange:e=>g(e.target.value),className:"jsx-4bb82fcea4244310 search"}),(0,i.jsx)("div",{className:"jsx-4bb82fcea4244310 spacer"}),(0,i.jsx)("button",{disabled:u,onClick:()=>w(!1),className:"jsx-4bb82fcea4244310 btn",children:"Yenile"}),(0,i.jsx)("button",{disabled:u||!x,onClick:()=>w(!0),className:"jsx-4bb82fcea4244310 btn",children:"Daha fazla"})]}),p&&(0,i.jsxs)("div",{className:"jsx-4bb82fcea4244310 err",children:["Hata: ",p]}),(0,i.jsx)("div",{className:"jsx-4bb82fcea4244310 tableWrap",children:(0,i.jsxs)("table",{className:"jsx-4bb82fcea4244310 tbl",children:[(0,i.jsx)("thead",{className:"jsx-4bb82fcea4244310",children:(0,i.jsxs)("tr",{className:"jsx-4bb82fcea4244310",children:[(0,i.jsx)("th",{className:"jsx-4bb82fcea4244310",children:"UID"}),(0,i.jsx)("th",{className:"jsx-4bb82fcea4244310",children:"Ad / E-posta"}),(0,i.jsx)("th",{className:"jsx-4bb82fcea4244310",children:"Şehir"}),(0,i.jsx)("th",{className:"jsx-4bb82fcea4244310",children:"Rol"}),(0,i.jsx)("th",{className:"jsx-4bb82fcea4244310",children:"Durum"}),(0,i.jsx)("th",{className:"jsx-4bb82fcea4244310",children:"İşlem"})]})}),(0,i.jsx)("tbody",{className:"jsx-4bb82fcea4244310",children:0===N.length?(0,i.jsx)("tr",{className:"jsx-4bb82fcea4244310",children:(0,i.jsx)("td",{colSpan:6,className:"jsx-4bb82fcea4244310 empty",children:"Kayıt yok."})}):N.map(e=>(0,i.jsxs)("tr",{className:"jsx-4bb82fcea4244310",children:[(0,i.jsx)("td",{className:"jsx-4bb82fcea4244310 mono",children:e.id}),(0,i.jsxs)("td",{className:"jsx-4bb82fcea4244310",children:[(0,i.jsx)("div",{className:"jsx-4bb82fcea4244310 strong",children:e.full_name||e.displayName||"—"}),(0,i.jsx)("div",{className:"jsx-4bb82fcea4244310 muted",children:e.email||"—"})]}),(0,i.jsx)("td",{className:"jsx-4bb82fcea4244310",children:e.city||"—"}),(0,i.jsx)("td",{className:"jsx-4bb82fcea4244310",children:e.role||"user"}),(0,i.jsx)("td",{className:"jsx-4bb82fcea4244310",children:e.status||"active"}),(0,i.jsxs)("td",{className:"jsx-4bb82fcea4244310 actions",children:["admin"===e.role?(0,i.jsx)("button",{onClick:()=>k(e,"user"),className:"jsx-4bb82fcea4244310 btn",children:"Admin Al"}):(0,i.jsx)("button",{onClick:()=>k(e,"admin"),className:"jsx-4bb82fcea4244310 btn",children:"Admin Yap"}),"suspended"===e.status?(0,i.jsx)("button",{onClick:()=>y(e,"active"),className:"jsx-4bb82fcea4244310 btn",children:"Aktif Et"}):(0,i.jsx)("button",{onClick:()=>y(e,"suspended"),className:"jsx-4bb82fcea4244310 btn",children:"Askıya Al"}),(0,i.jsx)("a",{href:"/portal/seller/profile?uid=".concat(e.id),target:"_blank",rel:"noreferrer",className:"jsx-4bb82fcea4244310 link",children:"Profili A\xe7"})]})]},e.id))})]})})]}),(0,i.jsx)(n(),{id:"4bb82fcea4244310",children:".wrap.jsx-4bb82fcea4244310{display:grid;grid-template-columns:240px 1fr;min-height:100vh;background:#0b0b0b;color:#e5e7eb;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}.side.jsx-4bb82fcea4244310{border-right:1px solid#1f2937;padding:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:12px;position:-webkit-sticky;position:sticky;top:0;height:100vh}.brand.jsx-4bb82fcea4244310{font-weight:800;color:#fff;margin-bottom:8px}.nav.jsx-4bb82fcea4244310{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:6px}.navBtn.jsx-4bb82fcea4244310{display:block;padding:10px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#1f2937;background:#0f172a;text-decoration:none;color:#e5e7eb}.navBtn.on.jsx-4bb82fcea4244310{background:#111827;border-color:#374151}.navBtn.jsx-4bb82fcea4244310:hover{background:#0f172a99}.logout.jsx-4bb82fcea4244310{margin-top:auto;all:unset;cursor:pointer;padding:10px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#ef4444;color:#fff;background:#991b1b;text-align:center}.logout.jsx-4bb82fcea4244310:hover{background:#b91c1c}.main.jsx-4bb82fcea4244310{padding:20px}.warn.jsx-4bb82fcea4244310{background:#0f172a;border:1px solid#374151;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:12px;margin:0 0 12px}.toolbar.jsx-4bb82fcea4244310{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px;margin:0 0 12px}.search.jsx-4bb82fcea4244310{-webkit-box-flex:0;-webkit-flex:0 0 360px;-moz-box-flex:0;-ms-flex:0 0 360px;flex:0 0 360px;max-width:100%;background:#0f172a;border:1px solid#334155;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;padding:10px 12px;color:#e5e7eb}.spacer.jsx-4bb82fcea4244310{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.btn.jsx-4bb82fcea4244310{all:unset;cursor:pointer;padding:8px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#374151;background:#111827}.btn.jsx-4bb82fcea4244310:disabled{opacity:.6;cursor:not-allowed}.tableWrap.jsx-4bb82fcea4244310{overflow:auto;border:1px solid#1f2937;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px}.tbl.jsx-4bb82fcea4244310{width:100%;border-collapse:separate;border-spacing:0}.tbl.jsx-4bb82fcea4244310 th.jsx-4bb82fcea4244310,.tbl.jsx-4bb82fcea4244310 td.jsx-4bb82fcea4244310{padding:10px 12px;border-bottom:1px solid#1f2937;font-size:14px;vertical-align:middle}.tbl.jsx-4bb82fcea4244310 thead.jsx-4bb82fcea4244310 th.jsx-4bb82fcea4244310{position:-webkit-sticky;position:sticky;top:0;background:#0b0b0b}.mono.jsx-4bb82fcea4244310{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:12px}.strong.jsx-4bb82fcea4244310{font-weight:700;color:#fff}.muted.jsx-4bb82fcea4244310{color:#94a3b8;font-size:12px}.empty.jsx-4bb82fcea4244310{color:#94a3b8;text-align:center}.actions.jsx-4bb82fcea4244310{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:6px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.link.jsx-4bb82fcea4244310{font-size:13px;color:#e5e7eb;text-decoration:none;border:1px solid#374151;padding:6px 10px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}@media(max-width:900px){.wrap.jsx-4bb82fcea4244310{grid-template-columns:1fr}.side.jsx-4bb82fcea4244310{position:static;height:auto;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.logout.jsx-4bb82fcea4244310{margin-top:0}.search.jsx-4bb82fcea4244310{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}}"})]})}},3977:function(e,a,s){"use strict";s.d(a,{Mq:function(){return i.Mq},getApps:function(){return i.C6},initializeApp:function(){return i.ZF}});var i=s(6771);(0,i.KN)("firebase","12.4.0","app")},5876:function(e,a,s){"use strict";s.d(a,{w9:function(){return i.W},hJ:function(){return i.Y},Xb:function(){return i.ab},getAuth:function(){return i.p},onAuthStateChanged:function(){return i.z},aF:function(){return i.a4},w$:function(){return i.ah},LS:function(){return i.a6},signInAnonymously:function(){return i.a1},e5:function(){return i.ac},rh:function(){return i.d},w7:function(){return i.D},gQ:function(){return i.an},ck:function(){return i.al}});var i=s(9199);s(6771),s(9711),s(4645),s(75)}},function(e){e.O(0,[281,703,645,771,229,888,774,179],function(){return e(e.s=5356)}),_N_E=e.O()}]);