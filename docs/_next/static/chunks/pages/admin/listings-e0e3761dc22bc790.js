(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[126],{4337:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/listings",function(){return t(5038)}])},6831:function(e,i,t){"use strict";t.d(i,{I:function(){return s},db:function(){return o}});var r=t(3977),a=t(5876),n=t(9828);let d=(0,r.getApps)().length?(0,r.Mq)():(0,r.initializeApp)({apiKey:"AIzaSyCd9GjP6CDA8i4XByhXDHyESy-g_DHVwvQ",authDomain:"ureteneller-ecaac.firebaseapp.com",projectId:"ureteneller-ecaac",storageBucket:"ureteneller-ecaac.firebasestorage.app",messagingSenderId:"368042877151",appId:"1:368042877151:web:ee0879fc4717928079c96a",measurementId:"G-BJHKN8V4RQ"}),s=(0,a.getAuth)(d),o=(0,n.getFirestore)(d)},5038:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return l}});var r=t(5893),a=t(645),n=t.n(a),d=t(7294),s=t(6831),o=t(5876),c=t(9828);function l(){d.useEffect(()=>{try{"ok"===localStorage.getItem("ue_admin_auth")||document.cookie.includes("ue_admin=1")||location.replace("/admin/login/")}catch(e){}},[]),d.useEffect(()=>(0,o.onAuthStateChanged)(s.I,()=>{}),[]);let[e,i]=d.useState([]),[t,a]=d.useState(""),[n,l]=d.useState(!1),[b,p]=d.useState("");async function f(){l(!0),p("");try{let e=await (0,c.PL)((0,c.query)((0,c.collection)(s.db,"listings"),(0,c.where)("status","==","pending"),(0,c.b9)(200)));i(e.docs.map(e=>({id:e.id,...e.data()})))}catch(e){p((null==e?void 0:e.message)||String(e))}finally{l(!1)}}d.useEffect(()=>{f()},[]);let m=d.useMemo(()=>{let i=t.trim().toLowerCase();return i?e.filter(e=>[e.id,e.title,e.seller_uid,e.seller_id,e.category,e.desc].filter(Boolean).join(" ").toLowerCase().includes(i)):e},[e,t]);async function h(e){try{await (0,c.r7)((0,c.doc)(s.db,"listings",e.id),{status:"approved"}),i(i=>i.filter(i=>i.id!==e.id))}catch(e){alert("Onaylanamadı: "+((null==e?void 0:e.message)||e))}}async function g(e){try{await (0,c.r7)((0,c.doc)(s.db,"listings",e.id),{status:"rejected"}),i(i=>i.filter(i=>i.id!==e.id))}catch(e){alert("Reddedilemedi: "+((null==e?void 0:e.message)||e))}}async function j(e){try{await (0,c.r7)((0,c.doc)(s.db,"listings",e.id),{featured:!e.featured}),i(i=>i.map(i=>i.id===e.id?{...i,featured:!e.featured}:i))}catch(e){alert("Vitrin değiştirilemedi: "+((null==e?void 0:e.message)||e))}}return(0,r.jsxs)(x,{active:"listings",children:[(0,r.jsx)("h1",{children:"İlanlar"}),(0,r.jsxs)("div",{className:"toolbar",children:[(0,r.jsx)("input",{className:"search",placeholder:"Başlık/UID/satıcı ara…",value:t,onChange:e=>a(e.target.value)}),(0,r.jsx)("div",{className:"spacer"}),(0,r.jsx)("button",{className:"btn",onClick:f,disabled:n,children:"Yenile"})]}),b&&(0,r.jsxs)("div",{className:"err",children:["Hata: ",b]}),(0,r.jsx)("div",{className:"tableWrap",children:(0,r.jsxs)("table",{className:"tbl",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Başlık"}),(0,r.jsx)("th",{children:"Satıcı"}),(0,r.jsx)("th",{children:"Fiyat"}),(0,r.jsx)("th",{children:"Durum"}),(0,r.jsx)("th",{children:"Vitrin"}),(0,r.jsx)("th",{children:"İşlem"})]})}),(0,r.jsx)("tbody",{children:0===m.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"empty",children:"Kayıt yok."})}):m.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"mono",children:e.id}),(0,r.jsx)("td",{children:e.title||"—"}),(0,r.jsx)("td",{children:e.seller_uid||e.seller_id||"—"}),(0,r.jsx)("td",{children:e.price?"₺".concat(e.price):"—"}),(0,r.jsx)("td",{children:e.status||"—"}),(0,r.jsx)("td",{children:e.featured?"Evet":"Hayır"}),(0,r.jsxs)("td",{className:"actions",children:[(0,r.jsx)("button",{className:"btn",onClick:()=>h(e),children:"Onayla"}),(0,r.jsx)("button",{className:"btn",onClick:()=>g(e),children:"Reddet"}),(0,r.jsx)("button",{className:"btn",onClick:()=>j(e),children:e.featured?"Vitrinden Kaldır":"Vitrine Al"})]})]},e.id))})]})}),(0,r.jsx)(u,{})]})}function x(e){let{active:i,children:t}=e;return(0,r.jsxs)("div",{className:"wrap",children:[(0,r.jsxs)("aside",{className:"side",children:[(0,r.jsx)("div",{className:"brand",children:"R \xb7 Admin"}),(0,r.jsxs)("nav",{className:"nav",children:[(0,r.jsx)("a",{className:"navBtn",href:"/admin/",children:"\xd6n Panel"}),(0,r.jsx)("a",{className:"navBtn "+("listings"===i?"on":""),href:"/admin/listings",children:"İlanlar"}),(0,r.jsx)("a",{className:"navBtn",href:"/admin/orders",children:"Siparişler"}),(0,r.jsx)("a",{className:"navBtn",href:"/admin/support",children:"Destek"}),(0,r.jsx)("a",{className:"navBtn",href:"/admin/moderation",children:"\xd6demeler"}),(0,r.jsx)("a",{className:"navBtn",href:"/admin/users",children:"Kullanıcılar"})]}),(0,r.jsx)("button",{className:"logout",onClick:()=>{try{localStorage.removeItem("ue_admin_auth")}catch(e){}document.cookie="ue_admin=; Max-Age=0; Path=/; SameSite=Lax; Secure",location.href="/admin/login/"},children:"\xc7ıkış"})]}),(0,r.jsx)("main",{className:"main",children:t})]})}function u(){return(0,r.jsx)(n(),{id:"5db9ec2cd0417e5f",children:".wrap.jsx-5db9ec2cd0417e5f{display:grid;grid-template-columns:240px 1fr;min-height:100vh;background:#0b0b0b;color:#e5e7eb;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}.side.jsx-5db9ec2cd0417e5f{border-right:1px solid#1f2937;padding:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:12px;position:-webkit-sticky;position:sticky;top:0;height:100vh}.brand.jsx-5db9ec2cd0417e5f{font-weight:800;color:#fff;margin-bottom:8px}.nav.jsx-5db9ec2cd0417e5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:6px}.navBtn.jsx-5db9ec2cd0417e5f{display:block;padding:10px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#1f2937;background:#0f172a;text-decoration:none;color:#e5e7eb}.navBtn.on.jsx-5db9ec2cd0417e5f{background:#111827;border-color:#374151}.logout.jsx-5db9ec2cd0417e5f{margin-top:auto;all:unset;cursor:pointer;padding:10px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#ef4444;color:#fff;background:#991b1b;text-align:center}.main.jsx-5db9ec2cd0417e5f{padding:20px}.toolbar.jsx-5db9ec2cd0417e5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px;margin:0 0 12px}.search.jsx-5db9ec2cd0417e5f{-webkit-box-flex:0;-webkit-flex:0 0 360px;-moz-box-flex:0;-ms-flex:0 0 360px;flex:0 0 360px;max-width:100%;background:#0f172a;border:1px solid#334155;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;padding:10px 12px;color:#e5e7eb}.spacer.jsx-5db9ec2cd0417e5f{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.btn.jsx-5db9ec2cd0417e5f{all:unset;cursor:pointer;padding:8px 12px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:1px solid#374151;background:#111827}.tableWrap.jsx-5db9ec2cd0417e5f{overflow:auto;border:1px solid#1f2937;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px}.tbl.jsx-5db9ec2cd0417e5f{width:100%;border-collapse:separate;border-spacing:0}.tbl.jsx-5db9ec2cd0417e5f th.jsx-5db9ec2cd0417e5f,.tbl.jsx-5db9ec2cd0417e5f td.jsx-5db9ec2cd0417e5f{padding:10px 12px;border-bottom:1px solid#1f2937;font-size:14px;vertical-align:middle}.tbl.jsx-5db9ec2cd0417e5f thead.jsx-5db9ec2cd0417e5f th.jsx-5db9ec2cd0417e5f{position:-webkit-sticky;position:sticky;top:0;background:#0b0b0b}.mono.jsx-5db9ec2cd0417e5f{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:12px}.empty.jsx-5db9ec2cd0417e5f{color:#94a3b8;text-align:center}.actions.jsx-5db9ec2cd0417e5f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:6px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}@media(max-width:900px){.wrap.jsx-5db9ec2cd0417e5f{grid-template-columns:1fr}.side.jsx-5db9ec2cd0417e5f{position:static;height:auto;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.logout.jsx-5db9ec2cd0417e5f{margin-top:0}}"})}},3977:function(e,i,t){"use strict";t.d(i,{Mq:function(){return r.Mq},getApps:function(){return r.C6},initializeApp:function(){return r.ZF}});var r=t(6771);(0,r.KN)("firebase","12.4.0","app")},5876:function(e,i,t){"use strict";t.d(i,{w9:function(){return r.W},hJ:function(){return r.Y},Xb:function(){return r.ab},getAuth:function(){return r.p},onAuthStateChanged:function(){return r.z},aF:function(){return r.a4},w$:function(){return r.ah},LS:function(){return r.a6},signInAnonymously:function(){return r.a1},e5:function(){return r.ac},rh:function(){return r.d},w7:function(){return r.D},gQ:function(){return r.an},ck:function(){return r.al}});var r=t(9199);t(6771),t(9711),t(4645),t(75)}},function(e){e.O(0,[281,703,645,771,229,888,774,179],function(){return e(e.s=4337)}),_N_E=e.O()}]);