(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{5356:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return t(5120)}])},2622:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var i=t(5893);t(7294);var n=t(1664),a=t.n(n);function l(e){let{children:r,role:t="owner"}=e;return(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"240px 1fr",minHeight:"100vh"},children:[(0,i.jsxs)("aside",{style:{background:"#0b0b0b",color:"#fff",padding:16},children:[(0,i.jsx)("h2",{style:{marginTop:0},children:"Admin"}),(0,i.jsxs)("nav",{style:{display:"grid",gap:8},children:[(0,i.jsx)(a(),{href:"/admin",style:{color:"#e2e8f0"},children:"\xd6n Panel"}),(0,i.jsx)(a(),{href:"/admin/users",style:{color:"#e2e8f0"},children:"Kullanıcılar"}),(0,i.jsx)(a(),{href:"/admin/listings",style:{color:"#e2e8f0"},children:"İlanlar"}),(0,i.jsx)(a(),{href:"/admin/orders",style:{color:"#e2e8f0"},children:"Siparişler"}),(0,i.jsx)(a(),{href:"/admin/support",style:{color:"#e2e8f0"},children:"Canlı Destek"}),(0,i.jsx)(a(),{href:"/admin/moderation",style:{color:"#e2e8f0"},children:"Moderat\xf6r"})]}),(0,i.jsxs)("div",{style:{marginTop:16,fontSize:12,opacity:.8},children:["Rol: ",t]})]}),(0,i.jsx)("section",{style:{padding:16,background:"#f8fafc"},children:r})]})}},2704:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var i=t(7294),n=t(6831),a=t(5876),l=t(9828);function s(){let[e,r]=(0,i.useState)(null),[t,s]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=(0,a.onAuthStateChanged)(n.I,async e=>{if(!e){r(null),s(!0);return}try{let t=await (0,l.getDoc)((0,l.doc)(n.db,"roles",e.uid));r(t.exists()?t.data().role:null)}finally{s(!0)}});return()=>e()},[]),{role:e,ready:t}}},6831:function(e,r,t){"use strict";t.d(r,{I:function(){return s},db:function(){return d}});var i=t(3977),n=t(5876),a=t(9828);let l=(0,i.getApps)().length?(0,i.Mq)():(0,i.initializeApp)({apiKey:"AIzaSyCd9GjP6CDA8i4XByhXDHyESy-g_DHVwvQ",authDomain:"ureteneller-ecaac.firebaseapp.com",projectId:"ureteneller-ecaac",storageBucket:"ureteneller-ecaac.firebasestorage.app",messagingSenderId:"368042877151",appId:"1:368042877151:web:ee0879fc4717928079c96a",measurementId:"G-BJHKN8V4RQ"}),s=(0,n.getAuth)(l),d=(0,a.getFirestore)(l)},5120:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return o}});var i=t(5893),n=t(7294),a=t(2622),l=t(2704),s=t(6831),d=t(9828);function o(){let{role:e,ready:r}=(0,l.Z)(),[t,o]=(0,n.useState)([]),[f,p]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{o((await (0,d.PL)((0,d.query)((0,d.collection)(s.db,"users"),(0,d.b9)(200)))).docs.map(e=>({id:e.id,...e.data()})))})()},[]);let m=(0,n.useMemo)(()=>{let e=f.trim().toLowerCase();return e?t.filter(r=>(r.displayName||"").toLowerCase().includes(e)||(r.email||"").toLowerCase().includes(e)):t},[t,f]);if(!r)return null;if(!e)return(0,i.jsx)("div",{style:{padding:24},children:"Yetkiniz yok."});let h=async e=>{await (0,d.r7)((0,d.doc)(s.db,"users",e.id),{premiumStatus:"active"===e.premiumStatus?"cancelled":"active",premiumUntil:"active"===e.premiumStatus?null:new Date(Date.now()+2592e6).toISOString()}),o(t.map(r=>r.id===e.id?{...r,premiumStatus:"active"===r.premiumStatus?"cancelled":"active"}:r))},g=async function(r){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if("owner"!==e)return alert("Sadece owner.");await (0,d.pl)((0,d.doc)(s.db,"roles",r.id),t?{role:"moderator",assignedBy:"owner",at:new Date().toISOString()}:{role:"",assignedBy:"owner",at:new Date().toISOString()}),alert(t?"Moderator verildi":"Moderator geri alındı")};return(0,i.jsxs)(a.Z,{role:e,children:[(0,i.jsx)("h1",{children:"Kullanıcılar"}),(0,i.jsx)("div",{style:{display:"flex",gap:8,marginBottom:8},children:(0,i.jsx)("input",{value:f,onChange:e=>p(e.target.value),placeholder:"İsim veya e-posta ara",style:{flex:1,padding:10,borderRadius:8,border:"1px solid #e5e7eb"}})}),(0,i.jsx)("div",{style:{display:"grid",gap:8},children:m.map(r=>(0,i.jsxs)("div",{style:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:12,padding:12,display:"grid",gridTemplateColumns:"1fr auto auto auto",gap:8,alignItems:"center"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontWeight:700},children:r.displayName||"-"}),(0,i.jsx)("div",{style:{fontSize:12,color:"#475569"},children:r.email})]}),(0,i.jsxs)("div",{children:["Premium: ",(0,i.jsx)("b",{children:r.premiumStatus||"yok"})]}),(0,i.jsx)("button",{onClick:()=>h(r),style:c(),children:"Premium ver/al"}),"owner"===e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>g(r,!0),style:c(),children:"Moderator ata"}),(0,i.jsx)("button",{onClick:()=>g(r,!1),style:u(),children:"Geri al"})]})]},r.id))})]})}let c=()=>({padding:"8px 10px",borderRadius:8,border:"1px solid #111",background:"#111",color:"#fff",cursor:"pointer"}),u=()=>({padding:"8px 10px",borderRadius:8,border:"1px solid #111",background:"#fff",color:"#111",cursor:"pointer"})}},function(e){e.O(0,[281,703,771,229,950,888,774,179],function(){return e(e.s=5356)}),_N_E=e.O()}]);